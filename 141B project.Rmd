---
title: "141B Proj"
author: "Isaiah Valencia"
date: "3/3/2020"
output: html_document
---

```{r setup, include=FALSE}
install.packages('spotifyr')

```


```{r }
library(spotifyr)
Sys.setenv(SPOTIFY_CLIENT_ID = 'f0d212500a7e4c74baaab9025ea186c3')
Sys.setenv(SPOTIFY_CLIENT_SECRET = '4985198dd20d47c7bdc5e52a1cf01e3f')

access_token <- get_spotify_access_token()
```


```{r , echo=FALSE}
library(spotifyr)
beatles <- get_artist_audio_features('the beatles')

```

```{r}
library(tidyverse)
library(knitr)

beatles %>% 
    count(key_mode, sort = TRUE) %>% 
    head(5) %>% 
    kable()
beatles
```


```{r}
r <- GET(
  "https://app.ticketmaster.com/discovery/v2/events.json?city=Sacramento&apikey=gNIIPGtZ3AJQKL7S6hfJ5sgYJLSEeKJc",
  query = list(
    size = 200,
    page = 1
  )
)
json <- content(r, as = "text")
data <- fromJSON(json)
data <- data[[1]]
data <- data[[1]]
data <- data %>% 
  select(name, type, id, test, url, locale)
data




for (i in 2:4){
r <- GET(
  "https://app.ticketmaster.com/discovery/v2/events.json?city=Sacramento&apikey=gNIIPGtZ3AJQKL7S6hfJ5sgYJLSEeKJc",
  query = list(
    size = 200,
    page = i
  )
)
json <- content(r, as = "text")
data_add <- fromJSON(json)
data_add <- data_add[[1]]
data_add <- data_add[[1]]
data_add <- data_add %>% select(name, type, id, test, url, locale)
data <- bind_rows(data, data_add)
}
data
```


